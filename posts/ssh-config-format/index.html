<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>SSH Config Format</title>
		<meta name="viewport" content="width=device-width">
		
		<link rel="stylesheet" href="https://schoeffm.github.io/css/hybrid.css">
		<link rel="stylesheet" href="https://schoeffm.github.io/css/style.css">
		<link rel="stylesheet" href="https://schoeffm.github.io/css/colors-dark.css">

		
	</head>
	<body>
		<header id="header">
			<h1><a href="https://schoeffm.github.io/">Personal PasteBin</a></h1>
			<p></p>
		</header>

		<div id="page">
			<div id="sidebar">
				<nav>
	
</nav>

			</div>

			<div id="content">
				
	<article class="post">
		<h1><a href="https://schoeffm.github.io/posts/ssh-config-format/">SSH Config Format</a> </h1>

		<div class="post-content"><p>Dealing with SSH-connections can become cumbersome quickly especially when configurations change frequently, too.</p>

<p>Luckily, you can pre-configure most of a connections settings in a user specific config-file located in your <code>~/.ssh</code>-folder called <code>config</code>.</p>

<p>For example:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># content of ~/.ssh/config</span>
Host gateway
    HostName <span style="color:#ae81ff">160</span>.46.188.153
    User cloud
    IdentityFile ~/.ssh/id_rsa</code></pre></div>

<p>This entry is equivalent to the inline command <code>ssh cloud@160.46.188.153 -i ~/.ssh/id_rsa</code> but can be leveraged now by:</p>

<p><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ ssh gateway</code></pre></div>
Much shorter and even more expressive than a cryptic IP-address.</p>

<p>Of course, you can add a lot more settings - for special use-cases lookup the <a href="https://linux.die.net/man/5/ssh_config">documentation for ssh-config</a> files. Here are some usual suspects that come handy:</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span></span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span></span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="display:block;width:100%;background-color:#3c3d38"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># content of ~/.ssh/config</span>
Host gateway
    HostName <span style="color:#ae81ff">160</span>.46.188.153
    User cloud
    IdentityFile ~/.ssh/id_rsa
<span style="display:block;width:100%;background-color:#3c3d38">    ForwardX11 yes
</span><span style="display:block;width:100%;background-color:#3c3d38">    ForwardAgent yes
</span><span style="display:block;width:100%;background-color:#3c3d38">    LocalForward <span style="color:#ae81ff">9906</span> <span style="color:#ae81ff">127</span>.0.0.1:443
</span>
Host monitoring
<span style="display:block;width:100%;background-color:#3c3d38">    ProxyCommand ssh cloud@160.46.188.153 -W %h:%p
</span>    HostName <span style="color:#ae81ff">10</span>.135.0.20
    User cloud
    IdentityFile ~/.ssh/id_rsa
    ForwardAgent yes</code></pre></td></tr></table>
</div>
</div>

<ul>
<li>line 6: we&rsquo;d like to use X11 forwarding (using GUI-based tools executed on the remote machine)</li>
<li>line 7: we activated <a href="https://dev.to/levivm/how-to-use-ssh-and-ssh-agent-forwarding-more-secure-ssh-2c32">agent forwarding</a> so when connected to <code>gateway</code> we can re-use our (local) SSH-key (without placing it on the remote machine) in order to i.e. do further SSH-hops or pull a GIT repo (via SSH).</li>

<li><p>line 8: For the <code>gateway</code>-host we created a local port-forwarding so we can access the HTTPS-port on that machine via our local port <code>9906</code>.</p></li>

<li><p>line 11: In those cases where we have to go through a SSH-gateway (a.k.a. jumphost) we would have to make two SSH-hops in a row (first, SSH into the machine that has a public IP - then SSH further into the actual destination machine using its internal IP). <br/>
In order to do this in one go we&rsquo;ve setup a <code>ProxyCommand</code> - so by issuing <code>ssh monitoring</code> we directly do two hops and end up at the destination host.</p></li>
</ul></div>

		<p class="meta">Posted on <span class="postdate">24. June 2019</span></p>
	</article>

			</div>

			<footer id="footer">
				<p class="copyright">Powered by
					<a href="https://gohugo.io/">Hugo</a> and the
					<a href="https://github.com/bake/solar-theme-hugo">Solar</a>-theme.</p>
			</footer>
		</div>

		
	</body>
</html>
